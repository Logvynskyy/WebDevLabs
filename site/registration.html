<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Document</title>
</head>
<style>
    body {
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
    }

    .topnav {
        overflow: hidden;
        background-color: #333;
        }

    .topnav a {
        float: left;
        color: #f2f2f2;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 17px;
    }

    .topnav a:hover {
        background-color: #ddd;
        color: black;
    }

    .topnav a.active {
        background-color: #4CAF50;
        color: white;
    }
</style>
<body>
    <div class="topnav">
        <a href="../index.html">Главная</a>
        <a class="active">Регистрация</a>
        <a href="images.html">Картинки</a>
    </div>
    <div style="width: 50%; float: left;">
        <div class="input__text">
          <h1 class="text__title">Введіть ваше ім'я</h1>
          <input type="text" class="input__text" placeholder="Your name" list="namesList">
          <a href="../report.html" target="_blank">
            <button class="submit__button">Перейти до звіту</button>
        </a> 
          <datalist id="namesList">
            <option class = "namesList-opt" value="Vova">
            <option class = "namesList-opt" value="Maxim">
            <option class = "namesList-opt" value="Denis">
            <option class = "namesList-opt" value="Stas">
        </datalist>
        </div>
        <div class="add__option">
            <h1 class="text__title">Введіть нове ім'я</h1>
            <input type="text" class="option__text" placeholder="New name">
            <button class="add__option-btn" onclick="func()">Add name</button>
        </div>
    </div>
    <div style="float: right;">
        <table id="currencyTable">
            <caption>Курс валют от Приватбанка на <span id="date"></span></caption>
            <tr>
                <th>Валюта 1</th>
                <th>Валюта 2</th>
                <th>Покупка</th>
                <th>Продажа</th>
            </tr>
        </table>
    </div>

    <script>
        function func(){
            var allOptions = document.getElementsByClassName("namesList-opt");
            var newName = document.getElementsByClassName("option__text")[0].value;

            var a = true; 
            for(let i = 0; i < allOptions.length; i++){
                if(allOptions[i].value == newName){alert("Name already exists."); a = false}
            }
            if(a){
                var list = document.getElementById('namesList');
                var option = document.createElement('option');
                option.value = newName;
                option.className = "namesList-opt";
                list.appendChild(option);
            }
        }

        $('#date').text(new Date().toLocaleDateString());
        const currencyObj = {
            USD: 'доллар США',
            UAH: 'укр. гривна',
            RUR: 'рос. рубль',
            EUR: 'евро',
            BTC: 'биткоин'
        }
        $.getJSON("https://api.privatbank.ua/p24api/pubinfo?json&exchange&coursid=5", function (result) {
            console.log(result);
            $.each(result, function (i, field) {
                console.log('field', field);
                var tr = "<td>" + currencyObj[field.base_ccy] + "</td><td>" + currencyObj[field.ccy] 
                + "</td><td>" + field.buy + "</td><td>" + field.sale + "</td>";
                $("#currencyTable tbody").append("<tr>" + tr + "</tr>");
            });
        });
    </script>
</body>
</html>